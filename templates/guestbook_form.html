<!-- templates/guestbook_form.html -->

<!DOCTYPE html>
<html>
  <head>
    <title>Guestbook Entry Form</title>
  </head>
  <body>
    {% extends 'bootstrap/base.html' %} {% block content %}
    <div class="container">
      <h1 class="mt-5">Guestbook Entry Form</h1>
      <form method="POST" action="/" class="mt-3">
        {{ form.hidden_tag() }}
        <div class="form-group">
          {{ form.email.label(class="form-label") }} {{
          form.email(class="form-control", placeholder="Email", required=true)
          }}
        </div>
        <div class="form-group">
          {{ form.name.label(class="form-label") }} {{
          form.name(class="form-control", placeholder="Name", required=true) }}
        </div>
        <div class="form-group">
          {{ form.message.label(class="form-label") }} {{
          form.message(class="form-control", placeholder="Message", rows="4",
          required=true) }}
        </div>
        <button type="submit" class="btn btn-primary">Submit</button>
      </form>
      <br />
      <a href="/view_guestbook">Guestbook Entries</a>
    </div>
    {% endblock %}
  </body>
</html>

<script>
  function validateForm() {
    // Get form elements
    const emailInput = document.getElementById("email");
    const nameInput = document.getElementById("name");
    const messageInput = document.getElementById("message");

    // Reset previous error messages
    emailInput.setCustomValidity("");
    nameInput.setCustomValidity("");
    messageInput.setCustomValidity("");

    // Validate email format
    const emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;
    if (!emailPattern.test(emailInput.value)) {
      emailInput.setCustomValidity("Please enter a valid email address.");
    }

    // Additional custom validation rules can be added here

    // Display user-friendly error messages if any
    if (!document.forms[0].checkValidity()) {
      // You can display custom error messages here
      return false;
    }
    return true;
  }
</script>
